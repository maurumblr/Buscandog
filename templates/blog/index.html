{% extends 'blog/layout.html' %}
{% load static %}

{% block main %}
    {% for post in Posts %}
        <article>
            <div class="article-header">
                <img class="article-header-img" src="{{ post.creator.profile.image.url }}" alt="">
                <h4 id="article-header-author-account"><a href="{% url 'user-posts' post.creator %}">{{ post.creator.username }}</a></h4>
                <p> {{post.date}} </p>
            </div>
            <div class="article-content">
                <h2><a class="article-content-title" href="{% url 'blog-detail-post' post.id %}"> {{post.title}} </a></h2>
                <p class="article-content-p"> {{post.content}} </p>
                <div class="article-content-img-grid">    
                    <div class="article-content-img-full">
                        {% if post.image1 %}         
                            <a href="{{post.image1.url}}" target="_blank" ><img class="article-content-img" src="{{post.image1.url}}" alt=""></a>
                        {% endif %}

                        {% if post.image2 %}
                            <a href="{{post.image2.url}}" target="_blank"><img class="article-content-img" src="{{ post.image2.url }}" alt=""></a>
                        {% endif %}

                        {% if post.image3 %}         
                            <a href="{{post.image3.url}}" target="_blank"><img class="article-content-img" src="{{post.image3.url}}" alt=""></a>
                        {% endif %}
                    </div>
                    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                          <div class="carousel-item active">
                            {% if post.image1 %} 
                            <img class="article-content-img" src="{{post.image1.url}}" class="d-block w-100" alt="...">
                            {% endif %}
                          </div>
                          <div class="carousel-item">
                            {% if post.image2 %} 
                            <img class="article-content-img" src="{{post.image2.url}}" class="d-block w-100" alt="...">
                            {% endif %}
                          </div>
                          <div class="carousel-item">
                            {% if post.image3 %} 
                            <img class="article-content-img" src="{{post.image3.url}}" class="d-block w-100" alt="...">
                            {% endif %}
                          </div>
                        </div>
                       <button class="carousel-control-prev" type="button" data-target="#carouselExampleControls" data-slide="prev">
                          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                          <span class="sr-only">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-target="#carouselExampleControls" data-slide="next">
                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                          <span class="sr-only">Next</span>
                        </button>
                      </div>
                </div>
            </div>
        </article>
    {% endfor %}

    <section class="content-paginator">
        {% if is_paginated %}
            <a class="btn btn-outline-info mb-4" href="?page=1"> << </a>
                {% for num in page_obj.paginator.page_range %}
                    {% if page_obj.number == num %}
                        <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
                    {% elif num > page_obj.number|add:'-2' and num < page_obj.number|add:'2'%}
                        <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
                    {% endif %}
                {% endfor %}
            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">>></a>
        {% endif %}
    </section>
{% endblock %}